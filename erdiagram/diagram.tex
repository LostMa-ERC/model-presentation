\tikzstyle{s} = [rectangle, rounded corners, minimum width=2cm, text width=3cm, minimum height=1cm, text centered, draw=black]
\tikzstyle{arrow} = [thick,->,>=stealth]
\begin{tikzpicture}[-,shorten >=1pt,auto,node distance=1.5cm,semithick]
\tikzstyle{every state}=[fill=red,draw=none,text=white]

\newcommand{\secHeader}[1]{\par \hspace*{\fill}\textit{#1}\\}
\newcommand{\secHeaderEnd}{\par\hrulefill}

\pic [] { entity = {{cycle}
{\textbf{Cycle}}
{
  %
  \secHeader{Label Components}
    - \textbf{preferred name}
  \secHeaderEnd
  %
  \secHeader{Description}
  - \href{https://www.wikidata.org/wiki/Property:P4970}{alternative names} \textsuperscript{+}
  \\ - member of cycle (\texttt{Cycle})
  \secHeaderEnd
  %
  \secHeader{References}
  - \href{https://www.wikidata.org/wiki/Property:P1343}{described by source} \textsuperscript{+} (\texttt{Citation})
}
}};

\pic [right = 3.3em of cycle] { entity = {{work}
{\textbf{Work}}
{
  %
  \secHeader{Label Components}
  - \textbf{preferred name} \\
  - member of cycle (\texttt{Cycle})
  \secHeaderEnd
  %
  \secHeader{Description}
  - \href{https://www.wikidata.org/wiki/Property:P4970}{alternative names} \textsuperscript{+} \\
  - \textbf{matter} (\texttt{Matter} vocab.) \\
  - secondary matter \textsuperscript{+} (\texttt{Matter} vocab.) \\-
  - is modeled on \textsuperscript{+} (\texttt{Work})
  \secHeaderEnd
  %
  \secHeader{References}
  - \href{https://www.wikidata.org/wiki/Property:P1343}{described by source} \textsuperscript{+} (\texttt{Citation})
}
}};

\pic [right = 3.3em of work] { entity = {{text}
{\textbf{Text}}
{
  %
  \secHeader{Label Components}
  - \textbf{preferred name} \\
  - \textbf{language} (\texttt{Language} vocab.) \\
  - \textbf{form} (\texttt{Form} vocab.)
  \secHeaderEnd
  %
  \secHeader{Hypothesis}
  - \textbf{is hypothetical} (y/n)
  \secHeaderEnd
  %
  \secHeader{Description}
  - \textbf{is expression of} (\texttt{Work})\\
  - lost status \\
  - \href{https://www.wikidata.org/wiki/Property:P4970}{alternative names} \textsuperscript{+} \\
  - is modeled on \textsuperscript{+} (\texttt{Text})\\
  - secondary matter \textsuperscript{+} (\texttt{Matter} vocab.) \\
  - \textbf{genre} (\texttt{Genre}) \\
  - poetic meter (\texttt{Meter} vocab.) \\
  - rhyme type (\texttt{Rhyme} vocab.) \\
  - strophe count \\
  - strophe length \\
  - verse length
  \secHeaderEnd
  %
  \secHeader{Production}
  - is written by \textsuperscript{+} (\texttt{Person})\\
  - is adapted by \textsuperscript{+} (\texttt{Person})\\
  - \textbf{date of creation} \\
  - date of creation source \textsuperscript{+} (\texttt{Citation})\\
  - place of creation (\texttt{Place}) \\
  - place of creation source \textsuperscript{+} (\texttt{Citation})
  \secHeaderEnd
  %
  \secHeader{References}
  - \href{https://www.wikidata.org/wiki/Property:P1343}{described by source} \textsuperscript{+} (\texttt{Citation})
}
}};

\pic [right = 3.3em of text] { entity = {{witness}
{\textbf{Witness}}
{
  %
  \secHeader{Label Components}
  - \href{https://www.wikidata.org/wiki/Property:P1557}{\textbf{manifests}} (\texttt{Text}) \\
  - preferred siglum \\
  - \href{https://www.wikidata.org/wiki/Property:P527}{has part} \textsuperscript{+} (\texttt{Part})
  \secHeaderEnd
  %
  \secHeader{Hypothesis}
  - \textbf{is hypothetical} (y/n) \\
  - was part of (\texttt{Document}) \\
  - followed fragment in hypo doc (\texttt{Witness}) \\
  - followed witness in hypo doc (\texttt{Witness})
  \secHeaderEnd
  %
  \secHeader{Description}
  - \textbf{status} (\texttt{Status}) \\
  - status notes \\
  - \textbf{is citation} (y/n)
  \secHeaderEnd
  %
  \secHeader{Production}
  - scribe \textsuperscript{+} (\texttt{Person}) \\
  - written language variant (\texttt{Scripta}) \\
  - \href{https://www.wikidata.org/wiki/Property:P571}{\textbf{date of creation}} \\
  - date of creation source \textsuperscript{+} (\texttt{Citation}) \\
  - place of creation (\texttt{Place}) \\
  - place of creation source \textsuperscript{+} (\texttt{Citation}) \\
  \secHeaderEnd
  %
  \secHeader{References}
  - \href{https://www.wikidata.org/wiki/Property:P1343}{described by source} \textsuperscript{+} (\texttt{Citation}) \\
}
}};

\pic [right = 3.3em of witness] { entity = {{part}
{\textbf{Part}}
{
  \secHeader{Label Components}
  - \textbf{is inscribed on} (\texttt{Document}) \\
  - \textbf{\href{https://www.wikidata.org/wiki/Property:P1545}{order in series}} (default 1)
  \secHeaderEnd
  %
  \secHeader{Content}
  - part of text \\
  - number of verses \\
  - volume number
  \secHeaderEnd
  %
  \secHeader{\href{https://tei-c.org/release/doc/tei-p5-doc/en//html/ref-extent.html}{Extent}}
  - number of lines \\
  - \textbf{lines are incomplete} (y/n) \\
  - \href{https://tei-c.org/release/doc/tei-p5-doc/en/html/ref-locus.html}{\textbf{page ranges}} \textsuperscript{+} (fol\textsubscript{1}|fol\textsubscript{2})
}
}};

\pic [right = 3.3em of part] { entity = {{doc}
{\textbf{Document}}
{
  \secHeader{Label Components}
  - current shelfmark \\
  - is conserved in (\texttt{Repository}) \\
  - collection\\
  - invented label
  \secHeaderEnd
  %
  \secHeader{Hypothesis}
  - \textbf{is hypothetical} (y/n)
  \secHeaderEnd
  %
  \secHeader{Description}
  - old shelfmark \textsuperscript{+}\\
  - \textbf{collection of fragments} (y/n) \\
  - digitization \textsuperscript{+} (\texttt{Digitization})
  \secHeaderEnd
  %
  \secHeader{References}
  - \href{https://www.wikidata.org/wiki/Property:P1343}{described by source} \textsuperscript{+} (\texttt{Citation}) \\
}
}};

\pic [right = 3.3em of doc] { entity = {{repository}
{\textbf{Repository}}
{
  \secHeader{Label Components}
  - \textbf{preferred name} \\
  - \textbf{city} (\texttt{Place})
  \secHeaderEnd
  %
  \secHeader{Description}
  - \href{https://www.wikidata.org/wiki/Property:P4970}{alternative names} \textsuperscript{+}\\
  - VIAF identifier \\
  - ISNI \\
  - Biblissima identifier \\
  - website \\
}
}};

\pic [above = 3.3em of text] {entity = {{person}
{{\textbf{Person}}}
{
  \secHeader{Label Components} \\
  - \textbf{preferred name}
  \secHeaderEnd
  %
  \secHeader{Description}
  - \href{https://www.wikidata.org/wiki/Property:P4970}{alternative names} \textsuperscript{+} \\
  - \textbf{fictional} (y/n)
  \secHeaderEnd
  %
  \secHeader{References}
  - \href{https://www.wikidata.org/wiki/Property:P1343}{described by source} \textsuperscript{+} (\texttt{Citation})
}
}};

\draw[omany-oone] (text) -- (person);
\draw[omany-oone] (witness) -- (person);

\pic [right = 3.3em of person] {entity = {{hypothesis}
{\textbf{Hypothesis}}
{
  \secHeader{Label Components}
  - \textbf{attested object} (\texttt{Text}, \texttt{Witness}, \texttt{Document})
  \secHeaderEnd
  %
  \secHeader{Description}
  - claim \\
  - certainty
  \secHeaderEnd
  %
  \secHeader{References}
  - \href{https://www.wikidata.org/wiki/Property:P1343}{described by source} \textsuperscript{+} (\texttt{Citation}) \\
}
}};

\draw[omany-omany] (text) -- (hypothesis);
\draw[omany-omany] (witness) -- (hypothesis);
\draw[omany-omany] (doc) -- (hypothesis);

\pic [right = 3em of hypothesis] {entity = {{images}
{\textbf{Images}}
{
  \secHeader{Label Components}
  - \textbf{presents} (\texttt{Part}) \\
  - \textbf{contained in} (\texttt{Digitization})
  \secHeaderEnd
  %
  \secHeader{Description}
  - \textbf{file range} (img\textsubscript{1}|img\textsubscript{2}) \\
  - \textbf{corresponding page range} (fol\textsubscript{1}|fol\textsubscript{2})
}
}};

\draw[one-omany] (part) -- (images);

\pic [right = 3em of images] { entity = {{digitization}
{\textbf{Digitization}}
{
  \secHeader{Label Components}
  - \textbf{URI} \\
  - ARK
  \secHeaderEnd
  %
  \secHeader{Description}
  - digitized by (\texttt{Repository}) \\
  - IIIF manifest \textsuperscript{+} \\
}
}};

\draw[one-omany] (part) -- (digitization);
\draw[omany-oone] (digitization) -- (repository);
\draw[many-one] (images) -- (digitization);

\pic at (current bounding box.south east) [anchor=north east] { entity = {{place}
{\textbf{Place}}
{
  \secHeader{Label Components}
  - \textbf{place name} \\
  - administrative region \\
  - country [\texttt{Country} vocab.]
  \secHeaderEnd
  %
  \secHeader{Description}
  - place type \\
  - location mappable \\
  - location certainty \\
  - GeoNames ID
}
}};

\draw[omany-oone] (text) -- (place);
\draw[omany-oone] (witness) -- (place);
\draw[one-omany] (place) -- (repository);

\pic at (current bounding box.north west) [anchor=north west] { entity = {{citation}
{\textbf{Citation}}
{
  \secHeader{Label Components}
  - author\textsuperscript{+} \\
  - title \\
  - database \\
  - record id
  \secHeaderEnd
  %
  \secHeader{Description}
  - DOI or URL \\
  - BibTeX citation
}
}};

\pic at (current bounding box.south west) [anchor=south west] { entityweak = {{language}
{\textbf{Language}}
{
  - ...
}
}};

\pic [above = 1 em of language] { entityweak = {{form}
{\textbf{Form}}
{
  - prose \\
  - verse \\
  - mixed \\
  - unknown
}
}};


\pic [above = 1 em of form] { entityweak = {{matter}
{\textbf{Matter}}
{
 - Britain or Brittany \\
 - England \\
 - France \\
 - Rome \\
 - unknown
}
}};

% \pic [below = 1em of form] { entityweak = {{status}
% {\textbf{Status}}
% {
%  - complete \\
%  - defective \\
%  - fragment \\
% }
% }};


\draw[oone-many] (cycle) -- (work);
\draw[one-many] (work) -- (text);
\draw[one-omany] (text) -- (witness);
\draw[one-omany] (witness) -- (part);
\draw[many-one] (part) -- (doc);
\draw[omany-one] (doc) -- (repository);
% \draw[omany-omany] (witness.80) |-++(5,1)-| node[pos=0.4]{\textit{Witness(es) of Hypothetical Document}} (doc);


% \draw[one-omany] (part.south) |-++(0,-1)|- (digitization.145);
% \draw[omany-oone] (digitization.35) -|++(1,0)-| (repository.south);

% % Place associative entity
% \draw[omany-oone] (text.80) |-++(1,3.5)-| node[]{} (place.80);
% \draw[omany-oone] (witness.90) |-++(1,2.5)-| node[]{} (place.100);
% \draw[one-omany] (place) -- (repository);

% % Person associative entity
% \draw[omany-oone] (text.south) |-++(1,-5)-| node[]{} (person.290);
% \draw[omany-oone] (witness.south) |-++(1,-4)-| node[]{} (person.250);

% % Hypothesis associative entity
% \draw[omany-oone] (witness.100) |-++(0,3.5)-| node[]{} (hypothesis.110);
% \draw[omany-oone] (work.90) |-++(0,1)|- node[]{} (hypothesis.330);
% \draw[omany-oone] (text.100) |-++(0,0.5)|- node[]{} (hypothesis.30);
% \draw[omany-oone] (part.north) |-(2,11)-| node[]{} (hypothesis.70);


\end{tikzpicture}
